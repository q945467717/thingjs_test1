<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head  th:include="import/head :: head">
    <meta charset="UTF-8">
    <title>站点3D详情</title>

</head>

<body>
<script>

    function getUrlParam(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var url = decodeURI(window.location.search);
        var r = url.substr(1).match(reg);
        if (r != null) return decodeURI(r[2]); return null;
    }
    // function callFuncInThingJS(funcName,id){
    //
    //     var iframe = $("#iframe")[0];
    //     var message ={
    //         'funcName':funcName,
    //         'param':id
    //     };
    //
    //     iframe.contentWindow.postMessage(message,'*');
    //
    // }

    $(document).ready(function () {

        var name = getUrlParam('name');

        if(name==="火车南站"){
            $("#iframe").attr("src","https://www.thingjs.com/s/1655bc8e55ad83e5dbd6ddd1")
        }
        if(name==="春熙路"){
            $("#iframe").attr("src","https://www.thingjs.com/s/de0f851092f46c887371bd13")
        }

    });

    window.onload = function (ev) {
        window.addEventListener('message', function (e) {
            var data = e.data;
            var funcName = data.funcName;
            var param = data.param;
            window[funcName](param);
        });
    };

    function changeLevel(param) {

        var li = document.createElement("li");
        $(li).text()
    }

</script>
<input type="hidden" th:each="station:${stationList}" th:value="${station.stationName}" class="name"/>
<nav class="navbar navbar-inverse" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header" style="width: 150px">
            <a class="navbar-brand" href="/admin/index" style="color: white;background-color: #44ab66"><span class="glyphicon glyphicon-arrow-left"></span><span>返回线路总览</span></a>
        </div>
        <div>
            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="width: 120px">
                        切换层级 <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="javascript:void(0);">园区</a>
                            <ul class="dropdown-menu multi-dropdown">
                                <li><a href="#">Custom Menu</a></li>
                                <li><a href="#">Custom Menu</a></li>
                                <li><a href="#">Custom Menu</a></li>
                                <li><a href="#">Custom Menu</a></li>
                            </ul></li>
                        <li><a href="javascript:void(0);">建筑</a></li>
                        <li><a href="javascript:void(0);">楼层</a></li>
<!--                        <li><a href="#">EJB</a></li>-->
<!--                        <li><a href="#">Jasper Report</a></li>-->
<!--                        <li class="divider"></li>-->
<!--                        <li><a href="#">分离的链接</a></li>-->
<!--                        <li class="divider"></li>-->
<!--                        <li><a href="#">另一个分离的链接</a></li>-->
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<iframe id="iframe" style="width: 100%;height: 888px;position: absolute;top: 49px;border: 0"></iframe>

<script th:replace="import/script :: script"></script>
</body>
</html>